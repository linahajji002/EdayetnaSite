<!DOCTYPE html>
<html>
    <head>
     
       
        <meta charset="UTF-8">
        <title>{% block title %}Symfony Maniac{% endblock %}</title>
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>⚫️</text><text y=%221.3em%22 x=%220.2em%22 font-size=%2276%22 fill=%22%23fff%22>sf</text></svg>">
        
        <!-- Favicons -->
        <link href="{{asset('build/front/img/favicon.png')}}" rel="icon">

        <!-- Fonts -->
        <link href="{{asset('https://fonts.googleapis.com')}}" rel="preconnect">
        <link href="{{asset('https://fonts.gstatic.com')}}" rel="preconnect" crossorigin>
        <link href="{{asset('https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,300;1,400;1,500;1,600;1,700;1,800&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Jost:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap')}}" rel="stylesheet">
        <!-- Font Awesome CDN -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

        <!-- Vendor CSS Files -->
        <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
        <link href="{{asset('build/front/vendor/aos/aos.css')}}" rel="stylesheet">
        <link href="{{asset('build/front/vendor/bootstrap/css/bootstrap.min.css')}}" rel="stylesheet">
        <link href="{{asset('build/front/vendor/bootstrap-icons/bootstrap-icons.css')}}" rel="stylesheet">
        <link href="{{asset('build/front/vendor/glightbox/css/glightbox.min.css')}}" rel="stylesheet">
        <link href="{{asset('build/front/vendor/swiper/swiper-bundle.min.css')}}" rel="stylesheet">
        <link rel="stylesheet" href="{{asset('https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css')}}">
        

        <!-- Main CSS File -->
        <link href="{{asset('build/front/css/main.css')}}" rel="stylesheet">
          <link href="{{asset('build/css2/flipcard.css')}}" rel="stylesheet">

        <style>
            @media (max-width: 768px) {
                .search-box {
                max-width: 100%;
                }
                .form-select {
                width: 100%;
                }
            }

            /* Focus style for select box */
            .form-select:focus {
                background-color: #e6e6e6; /* Subtle focus effect */
                border-color: #007bff;
            }
            .pagination {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 8px;
    padding: 10px;
    list-style: none;
}

/* Style des liens */
.pagination a {
    text-decoration: none;
    color:#8F491C;
    font-size: 16px;
    font-weight: bold;
    padding: 8px 12px;
    border: 1px solid #8F491C;
    border-radius: 5px;
    transition: all 0.3s ease;
}

/* Style au survol */
.pagination a:hover {
    background-color: #8F491C;
    color: white;
}

/* Style de la page active */
.pagination a.active {
    background-color:#8F491C;
    color: white;
    border-color:rgb(121, 79, 0);
}

/* Style des flèches */
.pagination a:first-child,
.pagination a:last-child {
    font-size: 18px;
}
            </style>
        

    </head>
    <body>
    
       <header id="header" class="header d-flex align-items-center fixed-top">
            <div class="container-fluid container-xl position-relative d-flex align-items-center">
            <a href="/" class="logo d-flex align-items-center me-auto">
                 <img src="{{asset('build/front/img/logo 2.png')}}" alt="">
            </a>

             <nav id="navmenu" class="navmenu">
                <ul>
                <li><a href="{{ path('app_home') }}" class="active">Accueil</a></li>
                <li class="dropdown"><a href="#"><span>Boutique</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
                    <ul>
                        <li><a href="{{ path('app_produit_index') }}">Produits</a></li>
                        <li><a href="{{ path('app_front_materiaux') }}">Matériaux</a></li>
                    </ul>
                </li>
                <li><a href="{{path('app_front_atelier') }}">Ateliers en ligne</a></li>
                <li><a href="{{path('app_reclamation_liste_client') }}">Réclamation</a></li>
                <li><a href="{{ path('app_panieruser') }}"><i class="fas fa-shopping-cart" style="font-size: 20px" ></i></a></li>
                <li class="dropdown">
                    <a href="#" id="toggleSidebar">
                        <i class="fas fa-user-circle" style="font-size: 25px"></i> <!-- Icône de compte -->
                    </a>
                    <ul>
                        <li><a href="{{ path('profil_page', { 'id': app.user.id }) }}">Profil</a></li>
                        <li class="dropdown"><a href="#"><span>Historique</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
                            <ul>
                            <li><a href="#">Commandes</a></li>
                            <li><a href="{{path('app_reclamation_liste_client') }}">Réclamations</a></li>
                            <li><a href="{{path('app_inscriptions') }}">Aeliers en ligne</a></li>
                            </ul>
                        </li>
                        <li><a href="{{ path('app_logout') }}">Déconnexion</a></li>
                    </ul>
                </li>
                </ul>
            </nav>
            </div>
        </header>
        

        

{% block body %}
        
 


<!-- Boutique Section -->
<section id="portfolio" class="portfolio section mt-5" style="background-color: #f6f2e1;">

  <!-- Section Title -->
  <div class="container section-title" data-aos="fade-up">
    <h2>Materiaux</h2>
    <p>Des matériaux soigneusement sélectionnés pour sublimer vos créations artisanales.</p>
  </div><!-- End Section Title -->
  
  <div class="container">
    <!-- Conteneur principal pour aligner les éléments en ligne -->
    <div style="display: flex; align-items: center; justify-content: space-between; width: 100%; margin-bottom: 20px; gap: 15px; flex-wrap: wrap;">
        
        <!-- Conteneur pour Search et Tri (aligné à gauche) -->
        <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
            
            <!-- Search Box -->
            <div class="search-box" style="display: flex; align-items: center; padding: 8px 12px; border-radius: 25px; background-color: #f5f5f5; max-width: 400px; box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.1);">
                <i class="fa fa-search" style="font-size: 20px; color: #333; margin-right: 8px;"></i>
                <input id="searchInput" type="text" placeholder="Rechercher..." style="border: none; background-color: transparent; font-size: 16px; width: 100%; outline: none; color: #333;">
            </div>

            <!-- Sort Box -->
            <select id="sortOrder" class="form-select" style="padding: 8px 12px; font-size: 16px; border-radius: 25px; border: none; background-color: #f5f5f5; color: #333; outline: none; cursor: pointer; min-width: 200px;">
                <option value="none">Aucun filtre</option>
                <option value="ascending">Prix Croissant</option>
                <option value="descending">Prix Décroissant</option>
            </select>

        </div>

        <!-- Bouton Wishlist aligné à droite -->
        <a href="{{ path('app_wishlistmateriaux') }}" class="btn btn-primary" style="display: flex; align-items: center; gap: 5px; padding: 8px 15px; border-radius: 25px;">
            <i class="bi bi-heart-fill"></i> Voir ma Wishlist
        </a>
    </div>








    <!-- Parcourir les matériaux -->
    <div id="materiaux" class="row gy-4 isotope-container" data-aos="fade-up" data-aos-delay="200">
    {% for materiau in materiauxes %}
        <div class="col-lg-4 col-md-6 portfolio-item">
            <div class="flip-card">
                <div class="flip-card-inner">
                    <!-- Front de la carte -->
                    <div class="flip-card-front">
                        <img src="{{ asset('img/masonry-portfolio/' ~ materiau.photo) }}" class="img-fluid" alt="{{ materiau.NomMateriel }}">
                        <div class="portfolio-info">
                            <h4>{{ materiau.NomMateriel }}</h4>
                            <p>{{ materiau.PrixUnitaire }} TND</p>
                            <a href="{{ asset('img/masonry-portfolio/' ~ materiau.photo) }}" title="{{ materiau.NomMateriel }}" class="glightbox preview-link"><i class="bi bi-zoom-in"></i></a>
                            <a href="portfolio-details.html" title="More Details" class="details-link"><i class="bi bi-link-45deg"></i></a> 
                           <form action="{{ path('wishlist_add', {'id': materiau.id}) }}" method="post">
                                <button type="submit" class="btn p-0 border-0 bg-transparent">
                                    <img src="{{ asset('build/assets/images/favoris.png') }}" style="width: 40px; height: 40px;">
                                </button>
                                {% if materiau.QuantiteStock > 0 %}
                                    <a href="#" class="btn btn-success btn-sm">
                                        <i class="fas fa-shopping-bag"></i>
                                    </a>
                                {% else %}
                                    <button class="btn btn-secondary btn-sm" disabled>
                                        <i class="fas fa-shopping-bag"></i> Indisponible
                                    </button>
                                {% endif %}

                            </form>      
                            
                         </div>
                    </div>

                    <!-- Back de la carte -->
                    <div class="flip-card-back">
                        <div class="card-details">
                            <h4>{{ materiau.NomMateriel }}</h4>
                            <p><strong>Description :</strong> {{ materiau.Description }}</p>
                            <p><strong>Prix :</strong> {{ materiau.PrixUnitaire }} TND</p>
                            <p><strong>Catégorie :</strong> {{ materiau.Categorie }}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    {% endfor %}
    
</div>

  
</section><!-- End Portfolio Section -->
<div class="pagination">
        {# Lien vers la page précédente #}
        <a href="{{ path('app_front_materiaux', {'page': pagination.currentPageNumber > 1 ? pagination.currentPageNumber - 1 : 1}) }}">&laquo;</a>

        {# Liens pour chaque page #}
        {% for i in 1..pagination.pageCount %}
            <a href="{{ path('app_front_materiaux', {'page': i}) }}"
               class="{% if i == pagination.currentPageNumber %}active{% endif %}">
                {{ i }}
            </a>
        {% endfor %}

        {# Lien vers la page suivante #}
        <a href="{{ path('app_front_materiaux', {'page': pagination.currentPageNumber < pagination.pageCount ? pagination.currentPageNumber + 1 : pagination.pageCount}) }}">&raquo;</a>
    </div>
</div><!-- End Container -->
<script>
document.addEventListener('DOMContentLoaded', function () {

  // Script pour gérer le flip de la carte
  document.querySelectorAll('.details-link').forEach(link => {
    link.addEventListener('click', function(e) {
      e.preventDefault(); // Empêche le lien de s'ouvrir
      const card = this.closest('.portfolio-item').querySelector('.flip-card');
      
      // Effectuer le flip de la carte
      card.classList.add('flip');
      
      // Retirer la classe 'flip' après 8 secondes pour revenir à l'état initial
      setTimeout(() => {
        card.classList.remove('flip');
      }, 8000); // 8000ms = 8 secondes
    });
  });

    
    // Fonction de recherche avec AJAX
    document.getElementById('searchInput').addEventListener('input', function() {
        const searchValue = this.value.trim().toLowerCase(); // Récupère la valeur de la recherche
        
        console.log("Valeur de recherche:", searchValue); // Affiche la valeur de la recherche

        // Si la recherche est vide, afficher tous les éléments
        if (searchValue === "") {
            console.log("Aucune valeur de recherche, affichage de tous les éléments.");
            document.querySelectorAll('.portfolio-item').forEach(item => {
                item.style.display = ''; // Afficher toutes les cartes
            });
            return;
        }

        // Effectuer la requête AJAX pour récupérer les matériaux filtrés
        console.log("Début de la requête AJAX...");
        fetch('/materiaux/search?q=' + searchValue)
        .then(response => {
            console.log("Réponse reçue de la requête AJAX.");
            if (!response.ok) {
                console.error('Erreur réseau:', response.statusText);
                throw new Error('Erreur de réseau');
            }
            return response.json(); // Convertir la réponse en JSON
        })
        .then(data => {
            console.log('Données reçues:', data);

            // Vérifiez si les données sont correctes
            if (!Array.isArray(data)) {
                console.error("Les données reçues ne sont pas un tableau valide.");
                return;
            }

            // Récupérer toutes les cartes de matériaux
            const allItems = document.querySelectorAll('.portfolio-item');
            console.log("Nombre d'éléments de matériaux trouvés:", allItems.length);

            // Masquer tous les matériaux par défaut
            allItems.forEach(item => {
                item.style.display = 'none';
                console.log("Carte masquée:", item); // Affiche les éléments masqués
            });

            // Afficher uniquement les matériaux qui correspondent à la recherche
            data.forEach(materiel => {
                console.log("Traitement du matériel:", materiel.nomMateriel);
                const item = Array.from(allItems).find(item => {
                    const itemName = item.querySelector('.portfolio-info h4')?.textContent.toLowerCase(); // Utilisez l'optionnel chaining pour éviter l'erreur si l'élément n'existe pas
                    console.log("Nom matériel trouvé dans l'élément:", itemName);

                    return itemName === materiel.nomMateriel.toLowerCase();
                });

                if (item) {
                    console.log("Affichage de l'élément:", materiel.nomMateriel);
                    item.style.display = ''; // Afficher l'élément si trouvé
                } else {
                    console.error("Élément correspondant non trouvé pour:", materiel.nomMateriel);
                }
            });

        })
        .catch(error => {
            console.error('Erreur lors de la récupération des données:', error);
        });
    });


 // Stocker l'ordre original des éléments au début
const originalItems = Array.from(document.querySelectorAll('.portfolio-item'));

// Fonction pour trier les matériaux par prix
function sortByPrice(sortOrder) {
  const itemsArray = Array.from(document.querySelectorAll('.portfolio-item'));

  // Si aucun filtre n'est sélectionné, remettre les éléments dans leur ordre d'origine
  if (sortOrder === 'none') {
    // Réinitialiser l'ordre des éléments à leur état original
    const container = document.querySelector('.isotope-container');
    originalItems.forEach(item => {
      item.style.display = ''; // Assurer que les éléments sont visibles
      container.appendChild(item); // Remettre les éléments dans le conteneur sans tri
    });
    return; // Ne pas trier, juste réinitialiser l'ordre
  }

  // Trier les éléments par prix (croissant ou décroissant)
  itemsArray.sort((a, b) => {
    const priceA = parseFloat(a.querySelector('.portfolio-info p').textContent.replace(' TND', '').trim());
    const priceB = parseFloat(b.querySelector('.portfolio-info p').textContent.replace(' TND', '').trim());
    
    if (sortOrder === 'ascending') {
      return priceA - priceB; // Tri croissant
    } else if (sortOrder === 'descending') {
      return priceB - priceA; // Tri décroissant
    }
  });

  // Réafficher les éléments dans l'ordre trié
  const container = document.querySelector('.isotope-container');
  itemsArray.forEach(item => {
    item.style.display = ''; // Assurer que les éléments sont visibles
    container.appendChild(item); // Ajouter l'élément trié à la fin du conteneur
  });
}

// Écouter le changement dans le sélecteur de tri
document.getElementById('sortOrder').addEventListener('change', function() {
  const sortOrder = this.value; // Récupérer la valeur sélectionnée (croissant, décroissant ou aucun filtre)
  sortByPrice(sortOrder); // Appliquer le tri
});



});
</script>

 
{% endblock %}
        <footer id="footer" class="footer dark-background">
          <div class="container footer-top dark-background">
            <div class="row gy-4">
                <div class="col-lg-4 col-md-6 footer-about">
                <a href="index.html.twig" class="d-flex">
                    <span class="sitename">EDAYETNA</span>
                </a>
                <div class="footer-contact pt-3">
                    <p>centre urbain nord</p>
                    <p>Tunisia</p>
                    <p class="mt-3"><strong>Phone:</strong> <span>+216 25 730 741</span></p>
                    <p><strong>Email:</strong> <span>benouaghremimen1@gmail.com</span></p>
                </div>
                </div>


                <div class="col-lg-2 col-md-3 footer-links">
                <h4>Liens Utiles</h4>
                <ul>
                    <li><i class="bi bi-chevron-right"></i> <a href="#hero">Accueil</a></li>
                    <li><i class="bi bi-chevron-right"></i> <a href="#about">A propos de nous</a></li>
                    <li><i class="bi bi-chevron-right"></i> <a href="#team">Equipe</a></li>
                    <li><i class="bi bi-chevron-right"></i> <a href="#contact">Contact</a></li>
                </ul>
                </div>

                <div class="col-lg-4 col-md-12">
                <h4>Suivez-nous</h4>
                <p>Restez connecté pour ne rien manquer !</p>
                <div class="social-links d-flex">
                    <a href=""><i class="bi bi-twitter-x"></i></a>
                    <a href=""><i class="bi bi-facebook"></i></a>
                    <a href=""><i class="bi bi-instagram"></i></a>
                    <a href=""><i class="bi bi-linkedin"></i></a>
                </div>
                </div>
            </div>
            </div>
        </footer>

  <script src="{{asset('build/front/vendor/bootstrap/js/bootstrap.bundle.min.js')}}"></script>
        <script src="{{asset('build/front/vendor/php-email-form/validate.js')}}"></script>
        <script src="{{asset('build/front/vendor/aos/aos.js')}}"></script>
        <script src="{{asset('build/front/vendor/glightbox/js/glightbox.min.js')}}"></script>
        <script src="{{asset('build/front/vendor/swiper/swiper-bundle.min.js')}}"></script>
        <script src="{{asset('build/front/vendor/waypoints/noframework.waypoints.js')}}"></script>
        <script src="{{asset('build/front/vendor/imagesloaded/imagesloaded.pkgd.min.js')}}"></script>
        <script src="{{asset('build/front/vendor/isotope-layout/isotope.pkgd.min.js')}}"></script>
        <script src="{{asset('https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js')}}"></script>
        <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
        <scrip src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script> AOS.init(); </script>
        <script src="build/front/js/main.js"></script>   
    </body>
</html>
      
      
